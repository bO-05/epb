# EPB (Email PR Bot)

EPB is an AI-powered code generation service that lets developers create code through email. Simply send an email with your code requirements, and within seconds, you'll receive a pull request with working code generated by Mistral AI, optimized for your specific repository.

## How It Works

1. **Send an Email**: Email your code request to the configured Postmark email address
2. **AI Processes Your Request**: The system analyzes your repository and generates contextually-aware code
3. **Receive a PR**: Get a pull request with the generated code ready for review
4. **Merge When Ready**: Review the changes and merge them into your codebase

## Features

- **Repository-Aware Generation**: Code is created with knowledge of your existing codebase
- **Multi-File Support**: Generate multiple files in a single request
- **Error Handling**: Get helpful feedback when issues occur
- **Custom Repository Targeting**: Specify which repository to target in your email

## Testing the Service

You can test the service by sending an email to:
```
7c3d33ed3c24d9b62b5c9ee11cd0b019@inbound.postmarkapp.com
```

In your email, include your code request and the system will generate a PR in the test repository (`bO-05/mailforge-test-target`). You'll receive an email response with the PR link.

**Example Email Request:**
```
Subject: Add input validation

Body:
Please implement form validation for our contact form in repo:bO-05/mailforge-test-target

Requirements:
- Validate email format
- Ensure names are at least 2 characters
- Prevent form submission until validation passes
```

## Setup

### Prerequisites

- GitHub account with repository access
- Postmark account
- Mistral AI API key

### Environment Variables

Copy `.env.example` to `.env` and fill in:

```
# GitHub Configuration
GITHUB_REPO=yourusername/yourrepo
GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxx

# Mistral AI
MISTRAL_API_KEY=your-mistral-api-key-here

# Postmark
POSTMARK_SERVER_TOKEN=your-postmark-server-token
POSTMARK_WEBHOOK_TOKEN=your-webhook-token

# Optional
PORT=5000
```

### Deploying to Vercel

1. Fork/clone this repository
2. Set up environment variables in Vercel dashboard
3. Deploy to Vercel
4. Configure Postmark inbound webhook to point to your deployment URL

## Local Development

```bash
# Install dependencies
pip install -r requirements.txt

# Run locally
python -m api.webhook
```

## License

MIT 